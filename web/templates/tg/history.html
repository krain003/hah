{% extends "tg/base.html" %}

{% block title %}History - NEXUS{% endblock %}

{% block content %}
<div class="header">
    <div class="header-content">
        <div class="logo">
            <span class="logo-icon">ğŸ“œ</span>
            <span>History</span>
        </div>
    </div>
</div>

<main class="main">
    <!-- Filters -->
    <div class="filter-tabs">
        <a href="/tg/history?filter=all" class="filter-tab {% if current_filter == 'all' %}active{% endif %}">
            All
        </a>
        <a href="/tg/history?filter=send" class="filter-tab {% if current_filter == 'send' %}active{% endif %}">
            ğŸ“¤ Sent
        </a>
        <a href="/tg/history?filter=receive" class="filter-tab {% if current_filter == 'receive' %}active{% endif %}">
            ğŸ“¥ Received
        </a>
        <a href="/tg/history?filter=swap" class="filter-tab {% if current_filter == 'swap' %}active{% endif %}">
            ğŸ’± Swaps
        </a>
    </div>
    
    <!-- Transactions -->
    {% if transactions %}
    <div class="tx-list-full">
        {% for tx in transactions %}
        <div class="tx-item-full">
            <div class="tx-left">
                <div class="tx-icon-large">
                    {% if tx.tx_type == 'send' %}ğŸ“¤
                    {% elif tx.tx_type == 'receive' %}ğŸ“¥
                    {% elif tx.tx_type == 'swap' %}ğŸ’±
                    {% else %}ğŸ“„{% endif %}
                </div>
                <div class="tx-details">
                    <div class="tx-type-badge {{ tx.tx_type }}">{{ tx.tx_type|capitalize }}</div>
                    <div class="tx-network">
                        {% set network = networks.get(tx.network) %}
                        {% if network %}{{ network.icon }} {{ network.name }}{% else %}{{ tx.network }}{% endif %}
                    </div>
                    {% if tx.to_address %}
                    <div class="tx-address-full">
                        â†’ {{ tx.to_address[:12] }}...{{ tx.to_address[-6:] }}
                    </div>
                    {% endif %}
                    <div class="tx-time">{{ tx.created_at }}</div>
                </div>
            </div>
            <div class="tx-right">
                <div class="tx-amount-large {% if tx.tx_type == 'send' %}negative{% else %}positive{% endif %}">
                    {% if tx.tx_type == 'send' %}-{% else %}+{% endif %}{{ tx.amount }}
                </div>
                <div class="tx-status {{ tx.status }}">
                    {% if tx.status == 'completed' %}âœ…
                    {% elif tx.status == 'pending' %}â³
                    {% elif tx.status == 'failed' %}âŒ
                    {% else %}{{ tx.status }}{% endif %}
                </div>
                {% if tx.tx_hash %}
                <a href="#" class="tx-explorer-link" onclick="copyToClipboard('{{ tx.tx_hash }}')">
                    ğŸ“‹ Copy Hash
                </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <div class="empty-title">No Transactions</div>
        <div class="empty-text">Your transaction history will appear here</div>
    </div>
    {% endif %}
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="/tg/" class="nav-item">
            <span class="nav-icon">ğŸ </span>
            <span>Home</span>
        </a>
        <a href="/tg/wallet" class="nav-item">
            <span class="nav-icon">ğŸ’¼</span>
            <span>Wallet</span>
        </a>
        <a href="/tg/history" class="nav-item active">
            <span class="nav-icon">ğŸ“œ</span>
            <span>History</span>
        </a>
        <a href="/tg/settings" class="nav-item">
            <span class="nav-icon">âš™ï¸</span>
            <span>Settings</span>
        </a>
    </nav>
</main>
{% endblock %}