{% extends "tg/base.html" %}

{% block title %}NEXUS WALLET{% endblock %}

{% block content %}
<div class="header">
    <div class="header-content">
        <div class="logo">
            <span class="logo-icon">ğŸ’</span>
            <span>NEXUS</span>
        </div>
        {% if user %}
        <div class="user-greeting">
            Hi, {{ user.tg_first_name or user.username }}!
        </div>
        {% endif %}
    </div>
</div>

<main class="main">
    {% if error %}
    <div class="alert alert-error">{{ error }}</div>
    {% endif %}
    
    <!-- Total Balance Card -->
    <div class="balance-card">
        <div class="balance-label">Total Balance</div>
        <div class="balance-value">${{ "%.2f"|format(total_usd|default(0)) }}</div>
        <div class="balance-change positive">+0.00%</div>
    </div>
    
    <!-- Quick Actions -->
    <div class="quick-actions">
        <a href="/tg/send" class="quick-action" onclick="haptic('light')">
            <span class="quick-action-icon">ğŸ“¤</span>
            <span>Send</span>
        </a>
        <a href="/tg/receive" class="quick-action" onclick="haptic('light')">
            <span class="quick-action-icon">ğŸ“¥</span>
            <span>Receive</span>
        </a>
        <a href="/tg/swap" class="quick-action" onclick="haptic('light')">
            <span class="quick-action-icon">ğŸ’±</span>
            <span>Swap</span>
        </a>
        <a href="/tg/p2p" class="quick-action" onclick="haptic('light')">
            <span class="quick-action-icon">ğŸ¤</span>
            <span>P2P</span>
        </a>
    </div>
    
    <!-- Wallets -->
    <div class="section">
        <div class="section-header">
            <span class="section-title">Your Wallets</span>
            <a href="/tg/create" class="section-action">+ Add</a>
        </div>
        
        {% if wallets %}
        <div class="wallets-list">
            {% for wallet in wallets %}
            <a href="/tg/wallet/{{ wallet.id }}" class="wallet-item" onclick="haptic('light')">
                <div class="wallet-icon">{{ wallet.icon }}</div>
                <div class="wallet-info">
                    <div class="wallet-name">{{ wallet.name }}</div>
                    <div class="wallet-address">{{ wallet.short_address }}</div>
                </div>
                <div class="wallet-balance">
                    <div class="balance-amount">{{ wallet.balance }}</div>
                    <div class="balance-symbol">{{ wallet.symbol }}</div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state-small">
            <p>No wallets yet</p>
            <a href="/tg/create" class="btn btn-primary btn-sm">Create Wallet</a>
        </div>
        {% endif %}
    </div>
    
    <!-- Recent Transactions -->
    <div class="section">
        <div class="section-header">
            <span class="section-title">Recent Activity</span>
            <a href="/tg/history" class="section-action">View All</a>
        </div>
        
        {% if transactions %}
        <div class="tx-list">
            {% for tx in transactions[:5] %}
            <div class="tx-item">
                <div class="tx-icon">
                    {% if tx.tx_type == 'send' %}ğŸ“¤{% elif tx.tx_type == 'receive' %}ğŸ“¥{% elif tx.tx_type == 'swap' %}ğŸ’±{% else %}ğŸ“„{% endif %}
                </div>
                <div class="tx-info">
                    <div class="tx-type">{{ tx.tx_type|capitalize }}</div>
                    <div class="tx-address">
                        {% if tx.to_address %}
                        {{ tx.to_address[:8] }}...{{ tx.to_address[-4:] }}
                        {% endif %}
                    </div>
                </div>
                <div class="tx-amount {% if tx.tx_type == 'send' %}negative{% else %}positive{% endif %}">
                    {% if tx.tx_type == 'send' %}-{% else %}+{% endif %}{{ tx.amount }}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state-small">
            <p>No transactions yet</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="/tg/" class="nav-item active">
            <span class="nav-icon">ğŸ </span>
            <span>Home</span>
        </a>
        <a href="/tg/wallet" class="nav-item">
            <span class="nav-icon">ğŸ’¼</span>
            <span>Wallet</span>
        </a>
        <a href="/tg/history" class="nav-item">
            <span class="nav-icon">ğŸ“œ</span>
            <span>History</span>
        </a>
        <a href="/tg/settings" class="nav-item">
            <span class="nav-icon">âš™ï¸</span>
            <span>Settings</span>
        </a>
    </nav>
</main>
{% endblock %}