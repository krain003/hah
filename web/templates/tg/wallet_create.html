{% extends "tg/base.html" %}

{% block title %}Create Wallet - NEXUS{% endblock %}

{% block content %}
<div class="header">
    <div class="header-content">
        <div class="logo">
            <span class="logo-icon">‚ûï</span>
            <span>Create Wallet</span>
        </div>
    </div>
</div>

<main class="main">
    {% if action == 'success' %}
    <!-- Single Wallet Success -->
    <div class="success-state">
        <div class="success-icon">‚úÖ</div>
        <div class="success-title">Wallet Created!</div>
        <div class="success-text">Your {{ wallet.name }} is ready</div>
    </div>
    
    <div class="wallet-created-card">
        <div class="created-header">
            <span class="created-icon">{{ wallet.icon }}</span>
            <span class="created-name">{{ wallet.name }}</span>
        </div>
        <div class="created-address" onclick="copyToClipboard('{{ wallet.address }}')">
            <code>{{ wallet.address }}</code>
            <span>üìã</span>
        </div>
    </div>
    
    {% if wallet.mnemonic %}
    <div class="mnemonic-container">
        <div class="mnemonic-warning">
            ‚ö†Ô∏è <strong>SAVE YOUR RECOVERY PHRASE!</strong>
        </div>
        <div class="mnemonic-words">
            {% for word in wallet.mnemonic.split() %}
            <div class="mnemonic-word">
                <span class="word-num">{{ loop.index }}</span>
                <span class="word-text">{{ word }}</span>
            </div>
            {% endfor %}
        </div>
        <button class="btn btn-secondary" onclick="copyToClipboard('{{ wallet.mnemonic }}')">
            üìã Copy Phrase
        </button>
        <div class="mnemonic-danger">
            üö® Never share this phrase with anyone! Anyone with this phrase can steal your funds.
        </div>
    </div>
    {% endif %}
    
    <div class="success-actions">
        <a href="/tg/" class="btn btn-primary">Go to Dashboard</a>
        <a href="/tg/create" class="btn btn-secondary">Create Another</a>
    </div>
    
    {% elif action == 'success_all' %}
    <!-- All Wallets Success -->
    <div class="success-state">
        <div class="success-icon">‚úÖ</div>
        <div class="success-title">{{ created_count }} Wallets Created!</div>
        <div class="success-text">All networks are ready</div>
    </div>
    
    {% if mnemonic %}
    <div class="mnemonic-container">
        <div class="mnemonic-warning">
            ‚ö†Ô∏è <strong>SAVE YOUR RECOVERY PHRASE!</strong>
        </div>
        <div class="mnemonic-words">
            {% for word in mnemonic.split() %}
            <div class="mnemonic-word">
                <span class="word-num">{{ loop.index }}</span>
                <span class="word-text">{{ word }}</span>
            </div>
            {% endfor %}
        </div>
        <button class="btn btn-secondary" onclick="copyToClipboard('{{ mnemonic }}')">
            üìã Copy Phrase
        </button>
        <div class="mnemonic-danger">
            üö® This phrase works for ALL your wallets. Keep it extremely safe!
        </div>
    </div>
    {% endif %}
    
    <div class="success-actions">
        <a href="/tg/" class="btn btn-primary">Go to Dashboard</a>
    </div>
    
    {% else %}
    <!-- Select Network -->
    <a href="/tg/wallet" class="back-link">‚Üê Back</a>
    
    {% if error %}
    <div class="alert alert-error">{{ error }}</div>
    {% endif %}
    
    <h2 class="page-title">Create New Wallet</h2>
    <p class="page-subtitle">Select a network or create all at once</p>
    
    <!-- Create All Button -->
    <form method="POST" action="/tg/create" class="create-all-form">
        <input type="hidden" name="create_all" value="true">
        <button type="submit" class="btn btn-primary btn-lg create-all-btn" onclick="haptic('medium')">
            üåê Create All Networks
            <span class="btn-subtitle">One seed phrase for all wallets</span>
        </button>
    </form>
    
    <div class="divider">
        <span>or select single network</span>
    </div>
    
    <!-- Network Grid -->
    <form method="POST" action="/tg/create" id="single-create-form">
        <div class="network-grid">
            {% for network_id, config in networks.items() %}
            <label class="network-option" onclick="haptic('light')">
                <input type="radio" name="network" value="{{ network_id }}" required>
                <div class="network-option-content">
                    <span class="network-option-icon">{{ config.icon }}</span>
                    <span class="network-option-name">{{ config.name }}</span>
                    <span class="network-option-symbol">{{ config.symbol }}</span>
                </div>
            </label>
            {% endfor %}
        </div>
        
        <div class="form-group" style="margin-top: 20px;">
            <label class="form-label">Wallet Name (optional)</label>
            <input type="text" name="name" class="form-input" placeholder="My Wallet">
        </div>
        
        <button type="submit" class="btn btn-secondary btn-lg" onclick="haptic('medium')">
            ‚ûï Create Selected Wallet
        </button>
    </form>
    {% endif %}
</main>
{% endblock %}